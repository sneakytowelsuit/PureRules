---
import { getCollection } from 'astro:content';
import SidebarLink from '../components/SidebarLink.astro';
const { title = 'PureRules', description = '' } = Astro.props;
const pages = await getCollection('docs');
const sorted = pages.sort((a: any,b: any) => (a.data.order ?? 0) - (b.data.order ?? 0));
---
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" href="/favicon.svg" />
    <title>{title} · PureRules</title>
    <meta name="description" content={description} />
    <style>
      :root {
        --bg: #f6f5f1;
        --fg: #111;
        --accent: #ff3d00;
        --accent-2: #00d8ff;
        --muted: #444;
        --card: #fff;
        --border: 4px;
        --shadow: 6px;
      }
      * { box-sizing: border-box; }
      body { margin: 0; background: var(--bg); color: var(--fg); font: 16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, sans-serif; }
      a { color: inherit; text-decoration: none; }
      a:focus { outline: 3px dashed var(--accent); outline-offset: 2px; }
      header {
        position: sticky; top: 0; z-index: 10; backdrop-filter: saturate(1.1);
        background: #ffe9e0; border-bottom: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111;
        display: flex; align-items: center; justify-content: space-between; padding: 12px 16px;
      }
      .brand { display: flex; gap: 12px; align-items: center; font-weight: 800; letter-spacing: .5px; }
      .brand .dot { width: 14px; height: 14px; background: var(--accent); border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; }
      .brand span { padding: 4px 10px; background: #fff; border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; }
      .nav { display: flex; gap: 12px; }
      .nav a { padding: 6px 10px; background: #fff; border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; font-weight: 700; }
      main { display: grid; grid-template-columns: 260px 1fr; gap: 20px; padding: 20px; max-width: 1200px; margin: 0 auto; }
      aside { position: sticky; top: 80px; align-self: start; }
      .toc { display: grid; gap: 10px; }
      .toc a { padding: 8px 10px; background: var(--card); border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; font-weight: 700; }
      .toc a:hover { transform: translateY(-2px); }
      article { background: var(--card); border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; padding: 24px; }
      article h1 { margin-top: 0; font-size: 2rem; }
      pre, code { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
      pre { background: #222; color: #eee; border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; padding: 16px; overflow: auto; }
      footer { margin: 40px auto; max-width: 1200px; padding: 16px; display: flex; justify-content: space-between; color: var(--muted); }
      .callout { background: #e9ff8f; border: var(--border) solid #111; box-shadow: var(--shadow) var(--shadow) 0 #111; padding: 12px; }
    </style>
  </head>
  <body>
    <header>
      <div class="brand">
        <div class="dot" />
        <span>PureRules</span>
      </div>
      <nav class="nav">
        <a href="/docs/">Docs</a>
        <a href="/reference/">Reference</a>
        <a href="/about">About</a>
        <a href="https://github.com/sneakytowelsuit/PureRules" rel="noreferrer" target="_blank">GitHub</a>
      </nav>
    </header>
    <main>
      <aside>
        <div class="toc">
          {sorted.map((p: any) => (
            <SidebarLink href={`/docs/${p.slug}/`} label={p.data.title} />
          ))}
        </div>
      </aside>
      <article>
        <slot />
      </article>
    </main>
    <footer>
      <div>MIT License • {new Date().getFullYear()}</div>
      <div>Built with Astro</div>
    </footer>
  </body>
</html>
